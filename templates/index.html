<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NCAA Basketball Live(ish) Probabilities</title>
    <style>
        input, select {
            width: 15%; /* Adjust this value to fit your design */
            box-sizing: border-box; /* Ensures padding doesn't affect overall width */
        }
        .form-control {
            margin-bottom: 10px; /* Adds spacing between form elements */
        }
    </style>
</head>
<body>
    <h1>NCAA Basketball Live(ish) Probabilities</h1>
    <div class="form-control">
        <select id="team1">
            {% for team_name in team_names %}
            <option value="{{ team_name }}">{{ team_name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-control">
        <select id="team2">
            {% for team_name in team_names %}
            <option value="{{ team_name }}">{{ team_name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-control">
        <input type="number" id="score1" placeholder="Score 1" min="0" step="1">
    </div>
    <div class="form-control">
        <input type="number" id="score2" placeholder="Score 2" min="0" step="1">
    </div>
    <div class="form-control">
        <select id="half">
            <option value="1">First Half</option>
            <option value="2">Second Half</option>
        </select>
    </div>
    <div class="form-control">
        <input type="text" id="time_on_clock" placeholder="Time on clock (MM:SS)" pattern="\d{2}:\d{2}" required title="Time format should be MM:SS">

    </div>
    <button onclick="runFunction()">Calculate</button>
    <div style="margin-top: 10px" id="result"></div>
    <div id="error" style="color: red;"></div>

    <script>
        function runFunction() {
            const score1 = parseInt(document.getElementById('score1').value, 10);
            const score2 = parseInt(document.getElementById('score2').value, 10);
            const half = document.getElementById('half').value;
            const timeOnClock = document.getElementById('time_on_clock').value;
            const errorDiv = document.getElementById('error');

    // Reset error message
    errorDiv.innerText = '';

    // Validate "half" input
    if (half !== "1" && half !== "2") {
        errorDiv.innerText = 'Please select a valid half (1 or 2).';
        return;
    }

    // Validate "time on clock" input
    const timePattern = /^([0-5]?[0-9]):([0-5][0-9])$/; // MM:SS format
    if (!timePattern.test(timeOnClock)) {
        errorDiv.innerText = 'Please enter the time on clock in MM:SS format.';
        return;
    }

    // Validate "score1" and "score2" inputs
    if (isNaN(score1) || isNaN(score2) || score1 < 0 || score2 < 0) {
        errorDiv.innerText = 'Score1 and Score2 should be non-negative integers.';
        return;
    }

    // If all validations pass, proceed with the fetch request
            const team1 = document.getElementById('team1').value;
            const team2 = document.getElementById('team2').value;

            fetch('/run-function', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ team1, team2, score1, score2, half, timeOnClock }),
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('result').innerText = 'Result: ' + data.result;
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>