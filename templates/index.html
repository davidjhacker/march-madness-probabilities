<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MM Probabilities</title>
    <style>
        input, select {
            width: 15%; /* Adjust this value to fit your design */
            box-sizing: border-box; /* Ensures padding doesn't affect overall width */
        }
        .form-control {
            margin-bottom: 10px; /* Adds spacing between form elements */
        }
    </style>
</head>
<body>
    <h1>MM Probabilities</h1>
    <div class="form-control">
        <select id="team1">
            {% for team_name in team_names %}
            <option value="{{ team_name }}">{{ team_name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-control">
        <select id="team2">
            {% for team_name in team_names %}
            <option value="{{ team_name }}">{{ team_name }}</option>
            {% endfor %}
        </select>
    </div>
    <div class="form-control">
        <input type="number" id="score1" placeholder="Score 1" min="0" step="1">
    </div>
    <div class="form-control">
        <input type="number" id="score2" placeholder="Score 2" min="0" step="1">
    </div>
    <div class="form-control">
        <input type="number" id="portion_elapsed" placeholder="Portion of Game Elapsed" min="0" max="1" step="0.01">
    </div>
    <button onclick="runFunction()">Run</button>
    <div id="result"></div>
    <div id="error" style="color: red;"></div>

    <script>
        function runFunction() {
            const score1 = parseInt(document.getElementById('score1').value, 10);
            const score2 = parseInt(document.getElementById('score2').value, 10);
            const portion_elapsed = parseFloat(document.getElementById('portion_elapsed').value);
            const errorDiv = document.getElementById('error');

            // Reset error message
            errorDiv.innerText = '';

            // Validate inputs
            if (isNaN(score1) || isNaN(score2) || isNaN(portion_elapsed) || score1 < 0 || score2 < 0 || portion_elapsed < 0 || portion_elapsed > 1) {
                errorDiv.innerText = 'Please ensure all fields are correctly filled. Score1 and Score2 should be non-negative integers, and Portion of Game Elapsed should be a float between 0 and 1.';
                return;
            }

            const team1 = document.getElementById('team1').value;
            const team2 = document.getElementById('team2').value;

            fetch('/run-function', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ team1, team2, score1, score2, portion_elapsed }),
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('result').innerText = 'Result: ' + data.result;
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>